"use strict";define(["jquery","db"],function(e){function n(n,i){function t(e,n){var i=d[e];return location.href.indexOf("dev")>-1&&("order_affirm"==e||"get_pay_list"==e)&&(i="http://dev-pay.wx-dev.chuchujie.com/api.php"),i||(i="get_area_list"==e?"https://api-image.chuchujie.com/api.php":"get_user_info"==e?"https://api-passport.chuchujie.com/api.php":"https://wx.chuchujie.com/api.php"),n(i)}if(d)return t(n,i);var a=ccj.db.getItem("shop_api");return a?(d=JSON.parse(a),t(n,i)):void e.get(f,function(e){return ccj.db.setItem("shop_api",JSON.stringify(e),86400),d=e,t(n,i)})}function i(){return{channel:"QD_appstore",package_name:"com.culiukeji.huanletao",client_version:"3.9.101",ageGroup:"AG_0to24",client_type:"h5",api_version:"v5",imei:"",method:"",gender:"1",token:"",userId:""}}function t(n){var i={ageGroup:"AG_0to24",channel:"QD_web_webkit",deviceId:"0",gender:"0",imei:"0",packageName:"com.culiu.purchase",platform:"wap",sessionId:"0",shopToken:"0",userId:"0",version:"1.0",xingeToken:""};return n&&(i=e.extend({},i,n)),i}function a(n,t){var a=e.extend({},i(),t);return a.method=n,a}function o(i,t,o,r){n(i,function(n){var c=a(i,t);e.ajax({url:n,data:{data:JSON.stringify(c)},type:"POST",dataType:"json"}).done(function(e){o&&o(e)}).fail(function(e){r?r(e):console.log(e.info)})})}function r(n,i,t,a){return i=i.toUpperCase(),e.isFunction(t)?a&&!e.isFunction(a)?(console.log("请传入函数类型的失败请求回调"),!1):void e.ajax({url:"//api.chuchujie.com/api",type:i,data:n,dataType:"json"}).done(function(e){"string"==typeof e&&(e=JSON.parse(e)),t&&t(e)}).fail(function(e){"string"==typeof e&&(e=JSON.parse(n)),a?a(e):console.log(e.info)}):(console.log("请传入函数类型的成功请求回调"),!1)}function c(n,i,a){var o,c,u={client:JSON.stringify(t())};"string"===e.type(n)?o={query:n}:e.isPlainObject(n)?o={query:JSON.stringify(n)}:alert("query参数格式错误，只能是object或json格式"),c=e.extend(u,o),r(c,"GET",i,a)}function u(n,i,t,a,o){o||(o="POST");var r=g.refundUrl;n.channel="QD_appstore",n.package_name="com.culiukeji.huanletao",n.client_version="3.9.101",n.ageGroup="AG_0to24",n.client_type="h5",n.api_version="v5",n.imei="",n.gender="1",n.userId="",n.subChannel="dwxk",n.page_size="20",n.page="1",n.mKey="1",e.ajax({url:r+i,type:o,dataType:"json",data:{data:JSON.stringify(n)}}).done(function(e){if("string"==typeof e)var n=JSON.parse(e);else var n=e;t&&t(n)}).fail(function(e){if(console.log("error"),"string"==typeof e)var n=JSON.parse(e);else var n=e;a&&a(n)}).always(function(){})}function s(n,i,t,a,o){o||(o="POST");var r=g.refundImgUrl;e.ajax({url:r+i,type:o,dataType:"json",data:{data:JSON.stringify(n)}}).done(function(e){if("string"==typeof e)var n=JSON.parse(e);else var n=e;t&&t(n)}).fail(function(e){if(console.log("error"),"string"==typeof e)var n=JSON.parse(e);else var n=e;a&&a(n)}).always(function(){})}function p(n,i,t,o){i||(i={});var r=a(n,i);e.ajax({url:g.refundUrl+"refund/"+n,data:{data:JSON.stringify(r)},type:"POST",dataType:"json",success:function(e){e="string"==typeof e?JSON.parse(e):e,t&&t(e)},fail:function(e){o?o(e):console.log("error",e)}})}window.ccj||(window.ccj={});var f,d=null,l="https://public.chuchujie.com/Public/app/domainconfig_https.json",h="/js/_ccj_/dev.json";f=location.href.indexOf("dev")>-1?h:l,o.shopDetail=function(e,n,i){var t={shop_id:""+e};o("shop_detail",t,n,i)};var g={};return g=~location.host.indexOf("dev")?{refundUrl:"//dev-itsp-sc.chuchujie.com/api/",refundImgUrl:"//master.wk.chuchutong.com/index.php?s="}:{refundUrl:"//sc.chuchujie.com/api/",refundImgUrl:"//wk.chuchutong.com/index.php?s=/"},ccj.ajax={shopAPI:o,adsAPI:c,adsAPIFull:r,refundAjax:u,refundAjaxImg:s,refundAddAddress:p},ccj});