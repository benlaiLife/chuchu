!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery||window.Zepto)}(function(t){function e(){}function a(t,e){var a;return a=e._$container==s?("innerHeight"in _?_.innerHeight:s.height())+s.scrollTop():e._$container.offset().top+e._$container.height(),a<=t.offset().top-e.threshold}function r(e,a){var r;return r=a._$container==s?s.width()+(t.fn.scrollLeft?s.scrollLeft():_.pageXOffset):a._$container.offset().left+a._$container.width(),r<=e.offset().left-a.threshold}function n(t,e){var a;return a=e._$container==s?s.scrollTop():e._$container.offset().top,a>=t.offset().top+e.threshold+t.height()}function o(e,a){var r;return r=a._$container==s?t.fn.scrollLeft?s.scrollLeft():_.pageXOffset:a._$container.offset().left,r>=e.offset().left+a.threshold+e.width()}function l(t,e){var l=0;t.each(function(i){function c(){f.trigger("_lazyload_appear"),l=0}var f=t.eq(i);if(!(f.width()<=0&&f.height()<=0||"none"===f.css("display")))if(e.vertical_only)if(n(f,e));else if(a(f,e)){if(++l>e.failure_limit)return!1}else c();else if(n(f,e)||o(f,e));else if(a(f,e)||r(f,e)){if(++l>e.failure_limit)return!1}else c()})}function i(t){return t.filter(function(e){return!t.eq(e)._lazyload_loadStarted})}function c(t,e){function a(){l=0,i=+new Date,o=t.apply(r,n),r=null,n=null}var r,n,o,l,i=0;return function(){r=this,n=arguments;var t=new Date-i;return l||(t>=e?a():l=setTimeout(a,e-t)),o}}var f,_=window,s=t(_),d={threshold:0,failure_limit:0,event:"scroll",effect:"show",effect_params:null,container:_,data_attribute:"original",data_srcset_attribute:"original-srcset",skip_invisible:!0,appear:e,load:e,vertical_only:!1,check_appear_throttle_time:300,url_rewriter_fn:e,no_fake_img_loader:!1,placeholder_data_img:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC",placeholder_real_img:"http://ditu.baidu.cn/yyfm/lazyload/0.0.1/img/placeholder.png"};f=function(){var t=Object.prototype.toString;return function(e){return t.call(e).replace("[object ","").replace("]","")}}(),t.fn.hasOwnProperty("lazyload")||(t.fn.lazyload=function(a){var r,n,o,u=this;return t.isPlainObject(a)||(a={}),t.each(d,function(e,r){-1!=t.inArray(e,["threshold","failure_limit","check_appear_throttle_time"])?a[e]="String"==f(a[e])?parseInt(a[e],10):r:"container"==e?(a._$container=a.hasOwnProperty(e)?a[e]==_||a[e]==document?s:t(a[e]):s,delete a.container):!d.hasOwnProperty(e)||a.hasOwnProperty(e)&&f(a[e])==f(d[e])||(a[e]=r)}),r="scroll"==a.event,o=0==a.check_appear_throttle_time?l:c(l,a.check_appear_throttle_time),n=r||"scrollstart"==a.event||"scrollstop"==a.event,u.each(function(r){var o=this,l=u.eq(r),c=l.attr("src"),f=l.attr("data-"+a.data_attribute),_=a.url_rewriter_fn==e?f:a.url_rewriter_fn.call(o,l,f),s=l.attr("data-"+a.data_srcset_attribute),d=l.is("img");return 1==l._lazyload_loadStarted||c==_?(l._lazyload_loadStarted=!0,void(u=i(u))):(l._lazyload_loadStarted=!1,d&&!c&&l.one("error",function(){l.attr("src",a.placeholder_real_img)}).attr("src",a.placeholder_data_img),l.one("_lazyload_appear",function(){function r(){n&&l.hide(),d?(s&&l.attr("srcset",s),_&&l.attr("src",_)):l.css("background-image",'url("'+_+'")'),n&&l[a.effect].apply(l,c?a.effect_params:[]),u=i(u)}var n,c=t.isArray(a.effect_params);l._lazyload_loadStarted||(n="show"!=a.effect&&t.fn[a.effect]&&(!a.effect_params||c&&0==a.effect_params.length),a.appear!=e&&a.appear.call(o,l,u.length,a),l._lazyload_loadStarted=!0,a.no_fake_img_loader||s?(a.load!=e&&l.one("load",function(){a.load.call(o,l,u.length,a)}),r()):t("<img />").one("load",function(){r(),a.load!=e&&a.load.call(o,l,u.length,a)}).attr("src",_))}),void(n||l.on(a.event,function(){l._lazyload_loadStarted||l.trigger("_lazyload_appear")})))}),n&&a._$container.on(a.event,function(){o(u,a)}),s.on("resize load",function(){o(u,a)}),t(function(){o(u,a)}),this})});